<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>旅行前做这个测试 — Travel Compatibility Test</title>
<style>
  :root{--accent:#ff5a78;--muted:#666;--card-bg:#fff;--card-border:#eee}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;padding:18px;background:#fafafa;color:#111}
  .wrap{max-width:980px;margin:12px auto;padding:18px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.03)}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px}
  h1{margin:0;font-size:20px;color:var(--accent)}
  p.lead{margin:6px 0 16px;color:var(--muted)}
  .lang-switch{display:flex;gap:8px}
  .lang-switch button{padding:6px 10px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer}
  .lang-switch .active{background:var(--accent);color:#fff;border-color:var(--accent)}
  .question{margin:12px 0;padding:10px;border-radius:10px;background:#fff;border:1px solid #f2f2f2}
  .q-title{font-weight:600;margin-bottom:8px}
  .q-sub{font-size:13px;color:var(--muted);margin-bottom:8px}
  .scale{display:flex;gap:8px}
  .scale label{flex:1;padding:8px;text-align:center;border-radius:8px;border:1px solid #eee;background:#fafafa;cursor:pointer;user-select:none}
  .scale input{display:none}
  .scale input:checked + span{background:linear-gradient(180deg,#fff0f6,#ffe6ef);border-color:var(--accent)}
  .controls{display:flex;gap:10px;margin-top:14px}
  button.primary{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
  button.secondary{background:#f3f3f3;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
  .result{margin-top:16px;padding:14px;border-radius:10px;background:#fff7fb;border:1px solid #ffdce6}
  .small{font-size:13px;color:var(--muted)}
  footer{margin-top:14px;font-size:12px;color:var(--muted)}
  @media (max-width:640px){ .scale{flex-direction:row} .wrap{padding:12px} h1{font-size:18px}}
</style>
</head>
<body>
<div class="wrap" id="app">
  <header>
    <div>
      <h1 id="title-zh">旅行前做这个测试，看看你们是不是合拍</h1>
      <h1 id="title-en" style="display:none">Take this test before travel — Are you compatible?</h1>
      <p class="lead" id="lead-zh">50道题，总分100。每题0-2分。完成后查看旅行合拍度。</p>
      <p class="lead" id="lead-en" style="display:none">50 questions — full score 100. Each item 0–2 points. See your travel compatibility after finishing.</p>
    </div>

    <div class="lang-switch" aria-hidden>
      <button id="btn-en">EN</button>
      <button id="btn-zh" class="active">中文</button>
    </div>
  </header>

  <form id="quiz">
    <!-- Questions list: 50 bilingual items -->
    <!-- Each question uses values 0,1,2. -->
    <!-- We'll generate q1..q50 -->
<script>
const questions = [
["我和旅伴对旅行预算的期望一致。","Me and my travel partner agree on travel budget expectations."],
["我喜欢随机改变计划，旅伴也能接受。","I like changing plans spontaneously and my partner accepts it."],
["我们对住宿标准（干净、舒适）有相似要求。","We have similar expectations on accommodation standards (clean, comfortable)."],
["我喜欢行程满档，旅伴也享受忙碌的行程。","I prefer packed itineraries and my partner enjoys busy schedules."],
["我和旅伴对饮食偏好（口味、忌口）能互相适应。","We can adapt to each other's food preferences/restrictions."],
["在突发状况（交通延误、丢东西）时我们能冷静协作。","We stay calm and cooperate when things go wrong (delays, lost items)."],
["我喜欢独自探索一会儿，旅伴不会不悦。","I enjoy exploring alone sometimes and my partner doesn't mind."],
["我们对购物和纪念品的花费有相似的期望。","We have similar expectations on shopping & souvenirs spending."],
["我愿意为旅伴调整活动节奏。","I'm willing to adjust pace for my partner."],
["我们对休息与玩乐的平衡看法一致。","We agree on the balance between rest and activities."],
["旅途中我不会过度依赖旅伴来做决策。","I don't rely excessively on my partner to make decisions during the trip."],
["我们对安全与冒险的接受度相近。","Our acceptance of risk vs safety is similar."],
["我愿意与旅伴平均分担行程安排工作。","I'm willing to share trip planning duties equally with my partner."],
["旅途中遇到小摩擦时，我们能快速和好。","We can reconcile quickly after small conflicts on trip."],
["我们在旅行节奏（慢旅行/快旅行）上能达成共识。","We can agree on travel pace (slow vs fast travel)."],
["对长时间一起相处我们都能保持个人空间。","We can both maintain personal space during long periods together."],
["旅途中突发健康问题时对方会负责任照顾。","Partner takes responsibility to care during health issues on trip."],
["我们对旅途中拍照和隐私的界限一致。","We share similar boundaries about photos and privacy while traveling."],
["我和旅伴对必须参加的景点优先级一致。","We agree on priority of must-see attractions."],
["我们对使用手机/社交媒体的频率没有冲突。","We don't conflict over phone/social media usage frequency."],
["我们对驾驶或搭乘交通工具的安全标准相近。","We have similar safety standards for driving/transport."],
["旅途中出现行李问题时我们能共同解决。","We solve luggage/problems together when they appear."],
["我愿意听从旅伴的建议去体验新事物。","I'm willing to follow partner's suggestions to try new things."],
["我们对迟到或等待的忍耐度相当。","Our tolerance for lateness or waiting is comparable."],
["我和旅伴对夜生活的偏好相近。","We have similar preferences for nightlife."],
["我们在旅途中有相同的卫生与清洁习惯要求。","We have similar hygiene and cleanliness habits on trip."],
["我们对行程中购物与观光的时间分配能达成一致。","We can agree on time allocation between shopping and sightseeing."],
["旅途中意见分歧时我们能用沟通解决而不是争吵。","We resolve disagreements by communication, not arguing."],
["我们在选择餐厅或活动上不会互相强迫。","We don't force each other when picking restaurants/activities."],
["对旅行中的花费我们能坦诚沟通与分担。","We can openly discuss and share travel expenses."],
["我和旅伴都能接受临时更改计划的情况。","We both accept last-minute plan changes."],
["我们对旅行目的（放松、探险、文化）有共同期待。","We share similar expectations about the trip's purpose (relaxation, adventure, culture)."],
["我们在等待排队或登机时都能保持耐心。","We both stay patient when waiting in lines or boarding."],
["我和旅伴在处理语言或沟通障碍时互相支持。","We support each other when facing language or communication barriers."],
["旅途中如果资金紧张，我们能一起调整并共担。","If money becomes tight, we adjust and share responsibilities together."],
["我们对纪念品选择不会因为审美差异产生重大分歧。","We don't have major disagreements about souvenirs due to taste differences."],
["我愿意尊重旅伴的文化或宗教禁忌。","I'm willing to respect partner's cultural or religious restrictions."],
["我们能接受旅程中出现的临时小意外（天气、关闭景点）。","We can accept small unexpected events (weather, closed sites)." ],
["我们的生物钟（早起/晚睡）比较匹配。","Our sleep schedules (early riser/night owl) are reasonably compatible."],
["我和旅伴对旅行节奏的期待不会不断改变。","Our expectations for travel rhythm don't change unpredictably."],
["旅途中我们能公平分担驾驶或导航任务。","We fairly share driving or navigation duties on the trip."],
["我和旅伴对尝试当地食物的开放程度相似。","We have similar openness to trying local foods."],
["旅途中我会主动承担解决问题的责任。","I take initiative to solve problems during travel."],
["我们对购物退换货或讨价还价的方式态度相近。","We have similar attitudes toward returns or bargaining while shopping."],
["旅途中我能给旅伴必要的情绪支持。","I can provide needed emotional support to my partner during travel."],
["我们对于紧凑行程中的休息安排有一致意见。","We agree on rest arrangements within a tight schedule."],
["旅途中我和旅伴都尊重彼此的隐私与个人物品。","We both respect each other's privacy and personal belongings."],
["在需要做决定时我们能快速达成一致。","We can quickly reach agreement when decisions are needed."],
["旅行结束后我们对回忆与总结的方式看法相似。","We have similar ways of reflecting and remembering the trip afterward."]
];
</script>

    <div id="questions-container"></div>

    <div class="controls">
      <button type="button" id="calc" class="primary">提交并查看结果 / Submit & View</button>
      <button type="button" id="reset" class="secondary">重置 / Reset</button>
    </div>
  </form>

  <div id="output" style="margin-top:12px"></div>

  <footer>
    <div class="small" id="disclaimer-zh">仅供参考和娱乐，不作为专业心理诊断。</div>
    <div class="small" id="disclaimer-en" style="display:none">For insight/entertainment only — not a professional diagnosis.</div>
  </footer>
</div>

<script>
  // render questions dynamically
  const container = document.getElementById('questions-container');
  questions.forEach((pair, idx) => {
    const i = idx+1;
    const q = document.createElement('div');
    q.className = 'question';
    q.innerHTML = `
      <div class="q-title" data-zh>${i}. ${pair[0]}</div>
      <div class="q-sub" data-en style="display:none">${i}. ${pair[1]}</div>
      <div class="scale" aria-hidden>
        <label><input type="radio" name="q${i}" value="0"><span data-zh>0 不同意 / 0 Disagree</span></label>
        <label><input type="radio" name="q${i}" value="1"><span data-zh>1 中立 / 1 Neutral</span></label>
        <label><input type="radio" name="q${i}" value="2"><span data-zh>2 同意 / 2 Agree</span></label>
      </div>
    `;
    container.appendChild(q);
  });

  // language toggle
  const btnEn = document.getElementById('btn-en');
  const btnZh = document.getElementById('btn-zh');
  function setLang(lang){
    const showZh = (lang === 'zh');
    document.querySelectorAll('[data-zh]').forEach(el => el.style.display = showZh ? '' : 'none');
    document.querySelectorAll('[data-en]').forEach(el => el.style.display = showZh ? 'none' : '');
    document.getElementById('title-zh').style.display = showZh ? '' : 'none';
    document.getElementById('lead-zh').style.display = showZh ? '' : 'none';
    document.getElementById('disclaimer-zh').style.display = showZh ? '' : 'none';
    document.getElementById('title-en').style.display = showZh ? 'none' : '';
    document.getElementById('lead-en').style.display = showZh ? 'none' : '';
    document.getElementById('disclaimer-en').style.display = showZh ? 'none' : '';
    btnZh.classList.toggle('active', showZh);
    btnEn.classList.toggle('active', !showZh);
    localStorage.setItem('rpi_lang', lang);
  }
  // default: zh if browser language contains zh, otherwise en
  const saved = localStorage.getItem('rpi_lang');
  if(saved) { setLang(saved); } else {
    const isZh = navigator.language && navigator.language.toLowerCase().includes('zh');
    setLang(isZh ? 'zh' : 'en');
  }
  btnEn.addEventListener('click', ()=> setLang('en'));
  btnZh.addEventListener('click', ()=> setLang('zh'));

  // scoring & interpretation
  function readValue(name){
    const el = document.querySelector('input[name="'+name+'"]:checked');
    return el ? Number(el.value) : null;
  }
  function calcScore(){
    const names = Array.from({length:questions.length}, (_,i)=>'q'+(i+1));
    for(const n of names){
      if(readValue(n) === null){
        alert( (localStorage.getItem('rpi_lang') === 'en' ? 'Please answer all questions.' : '请回答所有问题。') );
        return null;
      }
    }
    let total = 0;
    for(const n of names) total += readValue(n);
    // total max = questions.length * 2 = 100 (when 50 q)
    return total;
  }

  function interpret(score, lang){
    const pct = Math.round((score / (questions.length*2)) * 100);
    if(lang === 'zh'){
      if(pct >= 80) return {title:'非常合拍','desc':`得分 ${score}/100 — 非常合拍，适合一起旅行（${pct}%）`};
      if(pct >= 60) return {title:'较为合拍','desc':`得分 ${score}/100 — 较为合拍，旅行中能良好配合（${pct}%）`};
      if(pct >= 40) return {title:'存在差异','desc':`得分 ${score}/100 — 存在一些差异，建议提前沟通（${pct}%）`};
      return {title:'可能不太合拍','desc':`得分 ${score}/100 — 可能不太合拍，出发前多沟通以避免摩擦（${pct}%）`};
    } else {
      if(pct >= 80) return {title:'Highly compatible','desc':`${score}/100 — Highly compatible; great fit for traveling together (${pct}%)`};
      if(pct >= 60) return {title:'Fairly compatible','desc':`${score}/100 — Fairly compatible; should coordinate well during travel (${pct}%)`};
      if(pct >= 40) return {title:'Some differences','desc':`${score}/100 — Some differences; recommend discussing key points before travel (${pct}%)`};
      return {title:'Low compatibility','desc':`${score}/100 — Low compatibility; talk more before you go to avoid friction (${pct}%)`};
    }
  }

  document.getElementById('calc').addEventListener('click', ()=>{
    const score = calcScore();
    if(score === null) return;
    const lang = localStorage.getItem('rpi_lang') === 'en' ? 'en' : 'zh';
    const interp = interpret(score, lang);
    const out = document.getElementById('output');
    out.innerHTML = '';
    const box = document.createElement('div');
    box.className = 'result';
    const title = document.createElement('div');
    title.innerHTML = `<strong>${interp.title}</strong>`;
    box.appendChild(title);
    const desc = document.createElement('div');
    desc.style.marginTop = '8px';
    desc.innerHTML = `<div>${interp.desc}</div>`;
    box.appendChild(desc);

    const tips = document.createElement('div');
    tips.style.marginTop = '10px';
    if(lang === 'zh'){
      tips.innerHTML = `<div class="small"><strong>小建议：</strong>出发前就预算、节奏、饮食与作息等关键点沟通。遇到突发情况时约定处理方式。</div>`;
    } else {
      tips.innerHTML = `<div class="small"><strong>Tips:</strong> Discuss budget, pace, meals and sleep schedule before departure. Agree on how to handle unexpected issues.</div>`;
    }
    box.appendChild(tips);

    const btn = document.createElement('button');
    btn.className = 'primary';
    btn.style.marginTop = '12px';
    btn.textContent = (lang === 'zh') ? '打印 / 保存结果' : 'Print / Save Report';
    btn.onclick = ()=> window.print();
    box.appendChild(btn);

    out.appendChild(box);
    // optionally store result in localStorage (no backend)
    localStorage.setItem('rpi_last_score', score);
    localStorage.setItem('rpi_last_time', new Date().toISOString());
  });

  document.getElementById('reset').addEventListener('click', ()=>{
    document.getElementById('quiz').reset();
    document.getElementById('output').innerHTML = '';
  });
</script>

</body>
</html>
